<div class="container">
    <div class="col-md-8 col-md-offset-2">
        <br>
        
    </div>
<div class="container">
    <div class="row"><br><br>
        <div class="col-md-10 col-md-offset-1">
            <div class="well-block">
                <h3 class="text-center">Doctor's Availabilities</h3>
                <table class="table table-condensed">
                    <thead>
                        <tr>
                            <th>Doctor</th>
                            <th>Patient</th>
                            <th>Date</th>
                            <th>Start Time</th>
                            <th>End Time</th>
                            <th></th>
                            <th>Action</th>
                            
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                            <tr>
                        
                        {% for appointment in appointments %}
                        
                        

                        {% for doctor in doctors %}
                        {% if appointment.doctor_id == doctor.id %}
                        <td>{{ doctor.name }}</td>
            
                        {% endif %}
                        {% endfor %}
            
                        {% if appointment.patient_id == None %}
                        <form method="POST" action='{{url_for('clerk.clerkdashboard')}}'>
                                <td><select name="patient_name" onchange="if(this.value != 0) { this.form.submit(); }">
                                        <option value="0">Available</option>
                                        {% for patient in patients %}
                                        <option value="{{patient.id}}">{{ patient.name }}</option>
                                        {% endfor %}
                                        <input type="hidden" value="{{appointment.id}}" name="appointment_id">
                                  
                                </select></td> 
                            </form>
                        {% else %}
                       
                        {% for patient in patients %}
                                {% if appointment.patient_id == patient.id %}
                                <td>{{patient.name}}</td>
                                {% endif %}

                            {% endfor %}
                        
                        {% endif %}
                        
                          
                                
                               


                            <td>{{ appointment.date }}</td>
                            <td>{{ appointment.time_start }}</td>
                            <td>{{ appointment.time_end}}</td>
                      
                            <td>
                                    <form method="POST" action='{{url_for('clerk.unbook_appointment')}}'>
                                            <input class="hidden" value='{{ appointment.id }}' name="appointment_id">
                                            <td><button type="submit" class="btn btn-danger">Cancel Appointment</button></td>
                                        </form>
                            </td>
                            
                        </tr>
                       
                    
                    </tbody>
                    
                    {% endfor %}
                </table>
                {% with messages = get_flashed_messages(with_categories=true) %} {% if messages %} {% for message in messages %} {% if "Error"
                not in message[1]: %}
                <div class="alert alert-info">
                    <strong>Success! </strong> {{ message[1] }}
                </div>
                {% endif %} {% if "Error" in message[1]: %}
                <div class="alert alert-warning">
                    {{ message[1] }}
                </div>
                {% endif %} {% endfor %} {% endif %} {% endwith %}
            </div>
        </div>
    </div>
</div>